---
title: 《计算机网络原理》学习笔记
date: 1021-09-13 10:34:44
mathjax: true
category:
    - 计算机科学
---

网原总之是一个没打算认真学的专业课，因为真的对网络没有很大的兴趣。再加上上学期曾经看着迅哥哥他们被网原折磨，自己也没什么信心能学好这门专业课。

这个笔记完全基于上一届流传下来的《网原干饭背诵》，在此基础上对重点做一些标记做一些讲解，反正是个背书课，那么就只能一点一点背了。根据前人经验，这个笔记会把比较重要的东西用星号标注出来。

<!-- more -->

# 计算机网络的历史和新进展

## 【背诵 1 】网络基础

- 网络所提供的最基本服务为**信息传递**，不同的网络依据其提供的服务进行区分。而区分服务的依据则包括功能、延迟、带宽等各种**外部特性**。

- 网络依据**空间距离**可以分为局域网（ LAN ）、城域网（ MAN ）、广域网（ WAN ）和个域网（ PAN ）。依据**信息类型**可以分为数据网络、电话网络。依据**应用类型**可以分为专用网络、通用网络。依据**使用权**可以分为私有网络、公用网络。同时，网络也可以按照使用的协议进行分类，如 IP 协议等。

## 【背诵 2 】计算机网络发展历史

计算机网络的历史可以大致描述为：

- 1940 年代，第一个计算机 ENIAC 诞生
- 1950 年代，大型机和多终端系统诞生
- 1960 - 1964 年，分组交换网络诞生（ Paul Baran ）
- 1960 年代，计算机网络研究开始
- \* 1969 年， ARPANET 研究启动
- 1970 年代，计算机网络发展
    - 各国电信部门建设运行 X.25 分组交换网
    - SNA 以及 DNA 等专用网络体系结构出现
    - Internet 的前身 ARPANET 进行实验运行，带宽小且仅有不到 100 台计算机接入
    - \* 以太网和 Telnet 出现
    - \* 1979 年， TCP/IP 协议成熟
- 1980 年代，计算机网络逐步成型
    - 标准化的计算机网络体系结构 ISO/OSI 出现
    - 局域网 LAN 技术发展
    - FTP 、 NFS 、 E-mail 、 USENET 等技术出现
    - 1980 - 1983 年， ARPANET 和 MILNET 分离，前者采用 TCP/IP 协议
    - 1983 年， BSD UNIX 内置 TCP/IP 协议
    - 1985 - 1986 年， NSFNET 建成，用于连接 6 个超级计算中心
    - 1987 - 1990 年， NSFNET 开始连接地区网络
    - Internet 初具规模， 1987 年，中国第一个电子邮件发送到 Internet
    - 中国开始依赖电话线建立低速广域网
- 1990 年代，计算机网络进一步发展
    - Internet 商业化，在中国也得到了广泛应用
    - Web 技术在 Internet 上得到广泛应用
    - 中国出现局域网，如 Novell 等
    - 1990 - 1992 年， NSFNET 带宽提高，连接了 16 个地区网络
    - 1994 年， NSFNET 骨干网解体，出现了若干其他的商用骨干网
    - 1995 年，中国教育和科研网 CERNET 出现
- 2000 年代，计算机网络广泛应用
    - 网络应用发展迅速，搜索引擎和社交网络出现
    - 移动互联网产业快速发展
    - 2006 年，与 IPv6 相关的 CNGI-CERNET2 出现
- 最近，数据中心网络、天地一体化网络、 IPv6 技术等快速发展
    - 2011 年开始设立 World IPv6 Day
    - 2011 年 2 月 3 日，全球互联网名称与数字地址分配机构 ICANN 宣布 IPv4 地址耗尽

## 【背诵 3 】 Internet 技术

- Internet 是全球范围的、通用的、异构的公用计算机网络
- Internet 是其他类型的计算机网络技术的基础，如企业内部网（ Intranet ）
- Internet 开放的标准由 IETF 负责制定、维护和协调。其他类似 IRTF 、 IAB 、 IESG 等机构也参与了标准的维护
    - IETF 全称 Internet Engineering Task Force ，其分为若干个工作组（ WG ），其提交的 Internet 标准被称为 RFC ，即 Request For Comments
    - IRTF 全称 Internet Researching Task Force ，由各类专注某一个领域的研究小组组成
    - IAB 全称 Internet Architecture Board ，负责定义 Internet 的大体框架，为 IETF 提供方向上的指导
    - IESG 全称 Internet Engineering Steering Group ，负责在技术方面上管理 IETF 的活动
- Internet 是历史上发展最快的一种技术，其发展速度甚至超越摩尔定律

## 【背诵 4 】网络时代三大定律

- 【摩尔定律】 CPU 性能每 18 个月会翻番，每 10 年翻 100 倍
- 【光纤定律】也称超摩尔定律，骨干网带宽每 9 个月会翻番。每 10 年翻 10000 倍
- 【麦特卡菲定律】也称联网定律，网络价值和用户数量的平方成正比

## 【理解 1 】分组交换技术

Paul Baran 在设计能承受核攻击的通信系统的时候，确立了三个设计准则。

- 自适应系统的**热土豆路由策略**（能够学习并适应各种新的环境）
    - 如果不知道正确的路由，就将分组转发给所有邻居
    - 通过观察路过的分组来更新路由表，旧的路由表项会被删除
    - 尽可能快地转发分组，分组途径的路径并不一定是最短路径
- 分组发送策略（端节点能够容忍错误并恢复）
    - 每个节点根据自我的路由表决定如何转发分组
    - 每个分组的转发完全独立于其他的分组
    - 交换节点不保存端节点信息，这一点让网络的可拓展性大大增强
- 分布式策略
    - 所有交换节点平等，避免单一节点失效问题
    - 通过物理硬件冗余和自适应路由实现系统稳健性

而 Internet 就是这一类网络。 Internet 连接了各种异构的子网，提供两个最基本的功能，即全球唯一地址和分组通过动态路由传输。

分组交换技术具有相当多的优点，包括：

- 简单性
    - 每个分组自身携带信息
    - 一个路由表可以为所有的流量服务
    - 可以适应快速增长的网络规模
- 灵活性
    - 可以在各种物理底层上运行
    - 可以支持各种网络应用
- 可扩展性
    - 可以应对端系统的增加
    - 可以应对流量的增加
    - 可以应对网络规模增大带来的路由表增大和路由频繁变化
- 健壮性
    - 默认了网络结构变化是正常现象
    - 牺牲一定的效率换取网络的稳定

## 【背诵 5 】今日互联网

- 今日的互联网具有更大的规模和更多的用户，而且支持更多的功能，具有更高的价值，但是其健壮性、适应性和互联程度都下降了
- 当今互联网面临的一个问题就是 IPv4 地址耗尽，而目前缓解这个问题地方案是**网络地址转换协议（ Network Address Translation / NAT ）**
    - NAT 缓解了地址耗尽的问题，增强了安全性和控制性
    - 但是另外一方面却打破了 Internet 中地址唯一的假设
    - 端到端的分组传输路径变成多个 NAT 域的级联，相当于虚电路
    - 为了恢复 Internet 的原有结构，目前正在推进 IPv6 技术

## 【杂项 1 】未分类知识点

- 二十世纪后期人类两项最伟大的战略工程为**星球大战计划**和**互联网计划**。目前互联网已经发展为继海、陆、空、天之后的**第五空间**。

# 计算机网络体系结构

## 【背诵 6 】计算机网络的定义和组成

- 计算机网络定义为若干独立自治的计算机系统的互联集合体
    - 计算机网络和分布式系统不同，分布式系统虽然也是由若干个计算机系统组成，但其具有**内聚性**和**透明性**，故分布式系统呈现给用户的更像是一台计算机。计算机网络则明显分立，在用户的视角依然是若干不同的计算机
    - 目前分布式系统和计算机网络有合流的趋势，两者正在走向统一
- 计算机网络有两级组成，即**资源子网**和**通信子网**。资源子网常常是服务器或者用户计算机，而通信子网常常是通信线路等信道和路由器、交换机等网络互联设备
- 计算机网络之中的通信通常有两种，即**交换式通信**和**广播式通信**
    - 交换式通信又称**点对点通信**
        - 需要经过交换设备，将消息转发给一个或一组结点
        - 交换设备根据需要选择输出
        - 网络典型的拓扑结构包括 star / ring(loop) / tree / complete / intersecting rings / irregular
        - 关键技术是**路由选择**
    - 广播式通信
        - 多台计算机共享通信线路
        - 任一台计算机发出的信息可以直接被其它计算机接收
        - 网络典型的拓扑结构包括 bus / ring(loop)
        - 关键技术是**通道分配**
            - 静态分配，即分时间片。特点是控制简单，但通道利用率低
            - 动态分配，即各站点动态使用通道。特点是控制复杂，但通道利用率高。通道分配方法有两种。集中式指的是只有一个仲裁机构，分布式指的是各站点均有仲裁机构
    - 传统的 LAN 一般使用广播式通信，而 MAN 和 WAN 一般使用交换式通信。现代的 LAN 中交换式通信的应用正在增多

## 【理解 2 】计算机网络体系结构

- 计算机网络体系结构指的是对计算机网络及其部件所完成功能的比较精确的定义，即从功能的角度描述计算机网络的结构，是**层次和层间关系**的集合。但体系结构只会从功能上定义网络，并不会定义协议的细节和接口关系
    - 现代计算机网络体系架构指出，计算机网络的基本功能是为地理位置不同的计算机用户之间提供访问通路，并且应当提供若干功能（具体功能列表见 PPT ），这些功能中最重要的是**通信功能**
    - 这些功能的特征是**分层**，也就是说计算机网络中提供的功能是分成层次的
    - 位于不同计算机上进行对话的同一层通信各方可分别看成是一种进程，称为**对等（同等）进程**
- 计算机网络分层的体系结构有三个重要的概念，即协议、服务和接口
    - 计算机网络体系结构定义了计算机网络的功能是分层次的，而协议（ Protocol ）就是计算机网络同等层次中，通信双方进行信息交换时必须遵守的规则
        - 协议由三部分组成
            - 语法（ Syntax ）部分。即以二进制形式表示的命令和相应的结构
            - 语义（ Semantics ）部分。即发出的命令请求，完成的动作和回送的响应组成的集合
            - 定时关系（ Timing ）部分。即有关事件顺序的说明
        - 网络体系结构的分层决定了协议的分层，协议的分层构成了**洋葱结构**
            - 目的主机某一层收到的报文与源主机同一层发出的报文相同
            - 协议分层要保证整个通信系统功能完备高效
    - 协议定义了不同计算机同层次之间的关系，而服务（ Service ）定义同一个计算机的上下层之间的交换信息时必须遵守的规则
        - 服务有两种，即面向连接的服务和无连接服务。
            - 在使用面向连接的服务进行传输的时候，首先需要建立连接，然后使用这个连接传递数据，使用完毕需要关闭连接。这类服务的顺序性较好
            - 在使用无连接服务的时候，不建立连接，直接通过服务发送数据每个包都需要独立确定路由。这类服务的顺序性较差
            - 需要注意，连接并不意味着可靠，可靠性依然需要通过确认、重传等机制进行保证
        - 服务在形式上需要通过一组服务原语（ Primitive ）规定。原语可以分为四类，即请求、指示、响应、确认
    - 在同一个计算机之中相邻层之间都有一个接口（ Interface ），它定义了下层向上层提供的原语操作和服务
- 基于三大基本概念，计算机网络体系结构的具体实现大致为
    - 服务访问点 （ Service Access Point / SAP ）
        - 任何的层间服务都是在接口的 SAP 上完成的
        - 每一个 SAP 都有唯一的识别地址
        - 每一个层间接口可以具有多个 SAP
    - 接口数据单元（ Interface Data Unit / IDU ）
        - IDU 是通过 SAP 传递的层间信息单元（上下传输）
        - IDU 的构成是上一层的服务数据单元（ Service Data Unit / SDU ）和接口控制信息（ Interface Control Information / ICI ）的拼接
    - 协议数据单元（ Protocol Data Unit / PDU ）
        - PDU 是在同层实体之间通过网络传输的信息单元（水平传输）
        - PDU 的构成是上一层的 SDU 或其分段和协议控制信息（ Protocol Control Information / PCI ）的拼接
    - 基于上述定义，计算机网络的工作类似于下述
        - 当本层需要水平传输的时候，首先获得上层通过 SAP 传递的，由 SDU 和 ICI 拼接得到的 IDU 。然后本层删除 ICI ，将剩余的 SDU 拼接上 PCI 获得 PDU 并通过本层网络协议传输
        - 当本层需要继续向下层传输的时候，首先获得上层的 IDU ，这个从上层获得到本层的 IDU 在下层看来就是一个新的 SDU 。本层随后直接拼接上新的 ICI 获得新的 IDU 向下传输。所以说，最上层产生的数据包向下传播的时候，会逐层添加各层控制信息。而底层接收的数据包向上传播的时候，会逐层把这些控制信息删去，获取最后的数据
- 分层的优点包括模块化、功能抽象、可复用。缺点是数据隐藏会导致可能的低效
- 计算机网络体系结构的设计中还有两个原则，分别称为**端到端原则**和 **Rule of thumb**
    - 端到端原则的思想是底层需要尽可能简单，但是上层应用可以较为复杂（完成验证、纠错等工作），只有当这样的功能明显能提升功能的时候才会放在底层
    - Rule of thumb 的思想是，底层的新功能不能影响其他不使用这个新功能的部分

## 【理解 3 】 OSI 和 TCP/IP 模型及其他网络模型

- 模型建立的历史事件见 PPT
- OSI 模型在 1983 年提出，模型分为七层，从下至上为
    - 物理层，这一层包含基础网络硬件，在物理通信线路上传输二进制位（ Bit ）
    - 数据链路层，这一层目标是在有差错的物理线路上传输无差错的数据帧（ Frame ）
    - 网络层，这一层控制通信子网提供数据包（ Packet ）传输功能
    - 传输层，这一层为用户提供端到端的数据传输功能
    - 会话层，这一层为用户提供类似安全认证等会话控制服务
    - 表示层，这一层为用户提供数据表示和数据转换功能
    - 应用层
- TCP/IP 模型的提出早于 OSI 模型，且仅有四层：
    - Host-to-Internet 层，相当于 OSI 的物理层和数据链路层
    - Internet 层（网络层），控制通信子网提供源点到目的点的 IP 包传送，实现异构网络互联
    - 传输层，提供端到端的数据传送服务，如 TCP 和 UDP
    - 应用层，内部包含了 OSI 的会话层和表示层
- X.25 分组交换网在 70 年代提出，早于 OSI 模型，为公用包交换网与用户之间提供接口
    - 该模型面向连接，支持交换虚电路和永久虚电路
    - 物理层使用协议 X.21 以及 X.3 / X.28 / X.29
    - 数据链路层使用协议 LAP 和 LAPB
    - 网络层使用协议 PLP
    - 该模型提出了以下名词
        - （用户侧）数据终端设备（ Digital Terminal Equipment / DTE ）
- Novell Netware 在 1983 年提出，在 2005 年终止开发
    - 模型基于 client-server 结构，设计的基本思想是**文件共享**（同时期其它系统还基于磁盘共享，所以模型有一定先进性）
    - 基于 XNS （ Xeror Network System ），网络层协议是不可靠无连接协议 IPX （ Internet Packet Exchange ），传输层协议是面向连接的 NCP （ Netware Core Protocol ）和 SPX （ Sequenced Package Exchange ）
