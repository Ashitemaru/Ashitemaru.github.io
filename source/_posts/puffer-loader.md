---
title: Puffer 数据集加载器备忘录
date: 2022-10-17 18:31:12
category:
    - 【杂谈】开发
---

需要写一个 Puffer 数据集的 data loader 来把数据集洗成适合 RL 模型学习的格式，有些小东西打算写在这里备忘。

<!-- more -->

# 一些常见概念

流媒体领域还有一些概念看起来我还是得稍微认识一下。

首先是 H.264 标准中采用的**即时解码刷新（Instantaneous Decoding Refreshing）**，简称 **IDR**。IDR 中的 I 帧与 IDR 帧都是自带全部信息的帧，其不需要参考任何其他图像就能够独立解码。I 帧和 IDR 帧的差别在于 IDR 帧会直接触发刷新，从而阻断错误传递。也就是说从 IDR 帧开始，之前的所有信息全部清空，这些信息中最主要的是**参考帧列表（Decoded Picture Buffer）**，简称 **DPB**。而 I 帧不具有清空 DPB 的能力。

基于此，一个视频序列中可以有若干个 I 帧，且某一个 I 帧之后的图像可以引用这个 I 帧之前的图像作参考。但是相应地，某一个 IDR 帧之后的图像是不可以引用这个 IDR 帧之前的图像作为参考的。这就造成视频播放器总是能够足够信任地从 IDR 帧开始播放，因为不可能出现引用帧不存在的现象，所以一般而言视频的首个 I 帧都是 IDR 帧。

P 帧和 B 帧则是基于 I 帧或者 IDR 帧预测得到的帧。